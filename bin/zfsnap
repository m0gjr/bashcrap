#!/bin/bash

date=$(date +%Y-%m-%d)

if [ -z "$1" ]
then
	fss="/ /home"
else
	fss="$1"
fi

for fs in $fss
do
	ds=$(zfs mount | awk '$2 == "'$fs'" {print $1}')
	if [ -n "$ds" ]
	then
		zfs snapshot "$ds@$date"
	fi
done
